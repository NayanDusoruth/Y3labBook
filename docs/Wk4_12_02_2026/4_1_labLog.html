<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>lablog – labBook</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-bcb4737e8fbcf1e9dfc00b59f8305558.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../Wk4_12_02_2026/4_1_labLog.html">Wk4</a></li><li class="breadcrumb-item"><a href="../Wk4_12_02_2026/4_1_labLog.html">Wk 4.1 Lab log</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">labBook</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Wk0</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk0/0_0_Wk0_preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk0 Preface</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk0/0_1_test_page.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk0.1 Test page</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk0/0_2_Bibliography.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk0.2 Bibliography</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk0/0_3_Module_and_assignment_specifics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk0.3 Module and assignment specifics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk0/0_4_General_pre_prep_log.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk0.4 General pre-prep log</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk0/0_5_background_theory_and_concepts.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk0.5 Background theory and concepts</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Wk1</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk1_22_01_2026/1_1_labLog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk 1.1 Lab log</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk1_22_01_2026/1_2_WkSummary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk 1.2 summary</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Wk2</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk2_29_01_2026/2_1_labLog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk 2.1 Lab log</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk2_29_01_2026/2_2_additionalReading.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk 2.2 Additional Reading</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk2_29_01_2026/2_3_WkSummary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk 2.2 summary</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Wk3</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk3_05_02_2026/3_1_labLog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk 3.1 Lab log</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk3_05_02_2026/3_2_WkSummary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk 3.2 summary</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Wk4</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk4_12_02_2026/4_1_labLog.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Wk 4.1 Lab log</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk4_12_02_2026/4_2_WkSummary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk 4.2 summary</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Wk5</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk5_19_02_2026/5_1_labLog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk 5.1 Lab log</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk5_19_02_2026/5_2_WkSummary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk 5.2 summary</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Wk6</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk6_26_02_2026/6_1_labLog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk 6.1 Lab log</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk6_26_02_2026/6_2_WkSummary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk 6.2 summary</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true">
 <span class="menu-text">Wk7 - Post Wk6</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk7_onwards/7_1_labLog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk 7.1 Lab log</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Wk7_onwards/7_2_WkSummary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Wk 7.2 summary</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#wk-4" id="toc-wk-4" class="nav-link active" data-scroll-target="#wk-4">Wk 4</a>
  <ul class="collapse">
  <li><a href="#lab-log" id="toc-lab-log" class="nav-link" data-scroll-target="#lab-log">12/02/2026 lab log</a></li>
  <li><a href="#section" id="toc-section" class="nav-link" data-scroll-target="#section">14/02/2026</a></li>
  <li><a href="#section-1" id="toc-section-1" class="nav-link" data-scroll-target="#section-1">15/02/2026</a></li>
  <li><a href="#section-2" id="toc-section-2" class="nav-link" data-scroll-target="#section-2">16/02/2026</a></li>
  <li><a href="#section-3" id="toc-section-3" class="nav-link" data-scroll-target="#section-3">18/02/2026</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../Wk4_12_02_2026/4_1_labLog.html">Wk4</a></li><li class="breadcrumb-item"><a href="../Wk4_12_02_2026/4_1_labLog.html">Wk 4.1 Lab log</a></li></ol></nav></header>




<section id="wk-4" class="level1">
<h1>Wk 4</h1>
<section id="lab-log" class="level2">
<h2 class="anchored" data-anchor-id="lab-log">12/02/2026 lab log</h2>
<p>Have generated the following datasets over the past week:</p>
<ul>
<li>1000 equilibration steps, 500 simulation steps:
<ul>
<li>20x20</li>
<li>30x30</li>
<li>40x40</li>
</ul></li>
<li>2000 equilibration steps, 500 simulation steps:
<ul>
<li>20x20</li>
<li>30x30</li>
<li>40x40</li>
</ul></li>
<li>3000 equilibration steps, 500 simulation steps:
<ul>
<li>20x20</li>
<li>30x30</li>
<li>40x40</li>
<li>50x50</li>
<li>100x100 Furthermore, an additional 36 datapoints were added to the 3000 equilibration step datasets over a range <span class="math inline">\(T \in [2,3]\)</span></li>
</ul></li>
</ul>
<p>double check averaging; not weighted scaling effect on critical exponent is result of “incorrect” apparent critical temperature; critical temperature is size dependent, not the main exponent</p>
<p>To do list: * fix averaging * fix exponent fitting * figure out apparent vs true critical temp stuff</p>
<p>Averaging seems to fix it</p>
<p>2 methods to find “true” critical temperature (cite{labMaterials} finite-size-effects): * fit apparent critical temperatures for different sizes using <span class="math inline">\(\beta_{max} = \beta_{c} - c\cdot L^{\frac{-1}{v}}\)</span> * Binder cumulant; <span class="math inline">\(U_{l}=\frac{1 - &lt;s^{4}&gt;}{3&lt;s^{2}&gt;^{2}}\)</span>; for <span class="math inline">\(T_{c} &lt; T\)</span>, <span class="math inline">\(U_{l} = 0 + O(1/V)\)</span>, for <span class="math inline">\(T_{c} &gt; T\)</span>, <span class="math inline">\(U_{l} = /frac{2}{3} + O(1/V)\)</span>; at criticallity, <span class="math inline">\(U_{l}\)</span> trends towards constant * can find critical point by comparing <span class="math inline">\(U_{l}(\beta)\)</span> curves for different sizes; there should be an intersection point</p>
<p>have implemented cumulative computation; seems to work quite well, but will need to fit cumulative distribution to plot to be able to estimate data</p>
<ul>
<li>fixed cumulative fit</li>
<li>however am encountering computational issues; as far as i can tell binder cumulant should range</li>
</ul>
<p>quick catchup w/Turci * make sure to double check magnetisation over range</p>
<p>I am a complete idiot; it seems that when the code was discarding the configs for equilibration steps, it wasn’t updating the most recent config. Therefore the massive datasets was effectively only the last 500 steps</p>
<p>have fixed issue and am starting to regenerate data; have attempted multithreading, but isn’t quite working; so manually setting up parallel processing.</p>
<p>Am currently trying to fix critical exponent fitting; as it stands cumulat seems to work reasonably well despite odd data range. Furthermore need to wait on data generation to work on that further.</p>
<p>Therefore trying to fix critical exponent fitting.</p>
<p>Successfully implemented multithreading at the dataset object; it generates configurations in parallel; so this should accelerate dataset generation by up to a factor of 16 (currently allocating 8 threads, so should be 8x faster)</p>
<p>General to do list: * generate data * fix exponent fitting * fully implement binder cumulate intersection function * compute critical exponents for dimension * generate prettier plots * generate “final” data * if time allows, compute critical exponents for mean field theory model (alternatively just cite values) * write report</p>
<p>unrelated thoughts; vague report structure: * introduction * basic motivation * ising model theory * model statement * basic observables * existence of phase transition and critical exponents * metropolis algorithm theory * binder cumulant theory * critical exponent theory * mean field theory - note minimum derivations (if time allows) * methods * briefly outline “lab process” not code architecture, but type of data generated by what methods * results * include plot of apparent critical temperatures over size; use to illustrate “apparent vs true” critical temperature * include graph of cumulant fit intersections (demonstrate finding critical temperature) * include graph of magnetisations for different dimensions in same plot * include table of exponent values for D=1,2,3, ?4?, mean field theory * discussion * TBD, depends on results, but could discuss: * convergence of critical exponents to mean field theory values (how quickly…) * slow convergence near critical temperature * apparent vs true critical temperature * computational considerations * conclusion</p>
<p>will need citations for following (try and get different ones for each): * statement of ising model * computation for basic observables * phase transition and critical exponents</p>
<ul>
<li><p>binder cumulant theory</p></li>
<li><p>mean field theory derivation OR results</p></li>
<li><p>literature values for critical exponents</p></li>
<li><p>metropolis MC algorithm</p></li>
<li><p>probably general textbook (complexityAndCriticality may be good)</p></li>
</ul>
</section>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section">14/02/2026</h2>
<p>Am regenerating the broken data from the past week</p>
<ul>
<li>1000 equilibration steps, 500 simulation steps:
<ul>
<li>20x20</li>
</ul></li>
<li>2000 equilibration steps, 500 simulation steps:
<ul>
<li>20x20</li>
</ul></li>
<li>3000 equilibration steps, 500 simulation steps:
<ul>
<li>20x20</li>
<li>30x30</li>
<li>40x40</li>
<li>50x50</li>
<li>100x100</li>
</ul></li>
<li>3000 equilibration steps, 500 simulation steps additional:
<ul>
<li>60x60</li>
<li>70x70</li>
<li>80x80</li>
<li>90x90</li>
</ul></li>
</ul>
<p>Furthermore, an additional 36 datapoints were added to the 3000 equilibration step datasets over a range <span class="math inline">\(T \in [2,3]\)</span>.</p>
<p>Have just finished the 20x20 3000 steps dataset, and its A LOT cleaner than previously</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="figures/20x20Mag.png" class="img-fluid figure-img"></p>
<figcaption>Fig 4.1 - Absolute magnetisation <span class="math inline">\(M(T)\)</span> for 20x20, 3000Eq steps</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="figures/20x20Energy.png" class="img-fluid figure-img"></p>
<figcaption>Fig 4.2 - Energy <span class="math inline">\(E(T)\)</span> for 20x20, 3000Eq steps</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="figures/20x20Entropy.png" class="img-fluid figure-img"></p>
<figcaption>Fig 4.3 - Entropy <span class="math inline">\(S(T)\)</span> for 20x20, 3000Eq steps</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="figures/20x20FreeEnergy.png" class="img-fluid figure-img"></p>
<figcaption>Fig 4.4 - Free energy <span class="math inline">\(F(T)\)</span> for 20x20, 3000Eq steps</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="figures/20x20Suscept.png" class="img-fluid figure-img"></p>
<figcaption>Fig 4.5 - Susceptibility <span class="math inline">\(\chi(T)\)</span> for 20x20, 3000Eq steps</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="figures/20x20HeatCap.png" class="img-fluid figure-img"></p>
<figcaption>Fig 4.6 - Heat capacity <span class="math inline">\(C(T)\)</span> for 20x20, 3000Eq steps</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="figures/20x20Cumulant.png" class="img-fluid figure-img"></p>
<figcaption>Fig 4.7 - Cumulant for 20x20, 3000Eq steps</figcaption>
</figure>
</div>
<p>Furthermore the cumulant fit seems to be working quite well, so should be able to compute the actual critical temperature by that method once enough data has been generated. It may also be worth using the power law fit from the apparent critical temperatures as a second “cross validation” method as well.</p>
<p>Once both critical temperature methods are implemented, it will be possible to fit the critical functions to the data, and extract the critical exponents.</p>
<p>Once that is working, the “analytical machinery” for this project should be complete, and all that will need to be done is to generate appropriate data for <span class="math inline">\(d=3\)</span> and possibly <span class="math inline">\(d=4\)</span>; and begin thinking about writing the report.</p>
</section>
<section id="section-1" class="level2">
<h2 class="anchored" data-anchor-id="section-1">15/02/2026</h2>
<p>minor tweaking; have added system s.t the dataset orders its data in ascending temperature order; makes handling data easier.</p>
<p>note to self, potentially add method to quickly regenerate data (I.E, to replace clear outliers)</p>
<p>Have managed to normalise cumulant and implement a cumulant critical temperature method; quick plotting yields:</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="figures/cumulantIntersection.png" class="img-fluid figure-img"></p>
<figcaption>Fig 4.8 - Cumulant fits for <span class="math inline">\(s\in[20, 30, 40, 50]\)</span></figcaption>
</figure>
</div>
<p>Note that the plot yields 2 intersection clusters, however the higher temperature cluster better agrees with the data, so was accepted as the true values. As such Fig. 4.8 yields <span class="math inline">\(T_{c} = 2.16 \pm 0.02 º/k_{b}\)</span>; which seems reasonable examining all the plots. (however doesn’t agree with standard values of <span class="math inline">\(T_{c}=2.269\)</span> cite{labMaterials})</p>
<p>Have quickly implemented a “set critical temperature” functionality to dataset objects; that way the cumulant critical temperature can be assigned to all datasets being evaluated.</p>
<p>The magnetisation fit still doesn’t work though.</p>
<p>It seems that fitting power laws is something scipy’s curvefit is ill equipped to do. THus far efforts to fit magnetisation has been fruitless. Going to attempt susceptibility instead; the hope is that since susceptibility is fit for <span class="math inline">\(T_{c} &lt; T\)</span> instead, that it may provide insight to wether or not the fitting issues is an artefact of the <span class="math inline">\(T&lt;T_{c}\)</span> data.</p>
<p>It doesn’t seem to work. There’s a library “powerlaw” that may be of use, however i’m unsure how to use it. I think solving this may be a tmr problem.</p>
<p>attempted to simply compute an initial estimate of the exponent; given <span class="math inline">\(M=t^{\beta}\)</span> it follows that <span class="math inline">\(lnM = \beta lnt\)</span> so <span class="math inline">\(\beta = \frac{lnM}{lnt}\)</span>. THis wasn’t expected to produce correct results, however was hoped would provide an initial guess for curvefit to work. It unfortunately doesn’t</p>
</section>
<section id="section-2" class="level2">
<h2 class="anchored" data-anchor-id="section-2">16/02/2026</h2>
<p>am experimenting with scipy curvefit on some idealised power law data; it seems to work in this idealised case</p>
<p>After some debugging, it seems the power law fit was working, but was significantly “tech indebted” so wasn’t working due to messy code.</p>
<p>On the 50x50 dataset, fitting <span class="math inline">\(M = b \cdot (\frac{T-T_{c}}{T_{c}})^{\beta}\)</span> yields the following plot:</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="figures/magExponentFit.png" class="img-fluid figure-img"></p>
<figcaption>Fig 4.8 - Initial magnetisation exponent fit attempt on 50x50 dataset</figcaption>
</figure>
</div>
<p>Which yielded <span class="math inline">\(b= 1.022 \pm 0.006\)</span> and <span class="math inline">\(\beta= 0.038 \pm 0.002\)</span>. Given that the standard value for <span class="math inline">\(\beta=\frac{1}{8}\)</span> cite{labMaterials}, it seems the measured value is off by a factor of <span class="math inline">\(~3\)</span>.</p>
<p>Testing the other datasets yields:</p>
<ul>
<li>20x20: <span class="math inline">\(\beta= 0.041 \pm 0.002\)</span></li>
<li>30x30: <span class="math inline">\(\beta= 0.037 \pm 0.002\)</span></li>
<li>40x40: <span class="math inline">\(\beta= 0.038 \pm 0.002\)</span></li>
<li>50x50: <span class="math inline">\(\beta= 0.038 \pm 0.002\)</span></li>
</ul>
<p>Which is odd; all of these results are in significant agreement with each other, but not with standard values. It was established the 15/02/2026 that the cumulant derived <span class="math inline">\(T_{c}\)</span> is reasonable upon first inspection, but doesn’t agree with standard values. Setting the critical temperature to standard value of <span class="math inline">\(T_{c}=2.269\)</span> cite{labMaterials} instead yields:</p>
<ul>
<li>20x20: <span class="math inline">\(\beta= 0.66 \pm 0.004\)</span></li>
<li>30x30: <span class="math inline">\(\beta= 0.072 \pm 0.004\)</span></li>
<li>40x40: <span class="math inline">\(\beta= 0.068 \pm 0.003\)</span></li>
<li>50x50: <span class="math inline">\(\beta= 0.073 \pm 0.003\)</span></li>
</ul>
<p>Which is an improvement, but doesn’t yet agree with standard values. Furthermore whilst these values generally agree with one another, it is important to note how small the uncertainties are. Part of this is likely due to the fact that currently the use of scipy.curvefit doesn’t include the errors in the data. This is due to there still being fitting issues when trying to incorporate the error values, but does obfuscate errors in these “final” exponent values. Particularly errors increase approaching criticality, so these may being hiding significantly larger errors that would bring.</p>
<p>However given these results, its worth considering the following: * Critical temperature computation - it seems to be an underestimate; why? * it may be worth crossvalidating the cumulant method against the power law method * how to incorporate errors into the curvefit * the criticality power law applies close to criticality; it may be worth curtailing the data; for instance quickly curtailing the first 6 temperatures yields: * 20x20: <span class="math inline">\(\beta=  0.073 \pm 0.006\)</span> * 30x30: <span class="math inline">\(\beta=  0.081\pm 0.005\)</span> * 40x40: <span class="math inline">\(\beta=  0.079\pm 0.003\)</span> * 50x50: <span class="math inline">\(\beta=  0.081\pm 0.003\)</span> * this curtailement wasn’t particularly rigorous, but did improve results (albeit not to within agreement of standard values)</p>
<p>As such, if the source of critical temperature underestimation can be found, the primary “unaccounted error” would stem from the unincorporated errors in the fit, as well as the “curtailement effect”. It is unknown however if addressing these would bring the values into agreement with standard values.</p>
<p>It seems that the curvefit issues with errors was due to error<span class="math inline">\(=0\)</span> values; curtailing the 0 errors allows for it to fit (I.E, 50x50 yields <span class="math inline">\(\beta=  0.034\pm 0.005\)</span> for <span class="math inline">\(T_{c}=2.269\)</span>) which is visually a worse fit than prior attempts (and is further from the standard value). Therefore i suspect it may be better to use curvefit without including the errors.</p>
<p>On a whim, the critical temperature was set to <span class="math inline">\(T_{c}= 2.4\)</span> (an incorrect but larger value); which yielded <span class="math inline">\(\beta=  0.22\pm 0.02\)</span> (50x50 dataset). This is obviously an incorrect result, but it does seem to be the primary “lever” affecting the exponent value. Similarly curtailing the first 6 temperatures, and setting <span class="math inline">\(T_{c}=2.33\)</span> yields <span class="math inline">\(\beta=  0.132\pm 0.006\)</span> (50x50 daaset) which is closer to agreeing with standard values. again, these aren’t physically insightful results; but it gives a better idea of the relation between critical temperature and critical exponents.</p>
<p>To do list: * potentially implement other exponent fits; see if they: * have similar issues * if the scaling relations hold * reexamine cumulant critical temp method - maybe examine wether there are issues with cumulant fit that may be causing issues * currently i fit it to a logistic function; i’m wondering if a local power law fit may be more appropriate * potentially implement power law method for critical temperature * figure out how best to curtail data when fitting * try and ID final remaining disagreement between measured and standard values</p>
</section>
<section id="section-3" class="level2">
<h2 class="anchored" data-anchor-id="section-3">18/02/2026</h2>
<p>Note to self; multithreading is weird; despite interrupting the code, the threads are still running (and have done for several days); they’ve been generating data in the background without me noticing for several days now…</p>
<p>quickly implemented other exponent fitting methods for susceptibility and heat capacity. doing quick non rigorous tests on the 50x50 dataset yield <span class="math inline">\(\beta=0.072\)</span>, <span class="math inline">\(\gamma=0.32\)</span>, <span class="math inline">\(\alpha=0.55\)</span> compared to standard values of <span class="math inline">\(\beta=0.125\)</span>, <span class="math inline">\(\gamma=1.75\)</span>, <span class="math inline">\(\alpha=0\)</span>. Something is going wrong here, however the fit seems to be working… Sidenote, the scaling relation <span class="math inline">\(\alpha + 2\beta + \gamma = 2\)</span> doesn’t work, instead yielding <span class="math inline">\(\alpha + 2\beta + \gamma = 1\)</span> First port of call will be to rigorously check these values for different critical temperatures (50x50 dataset): * standard value of 2.269 * <span class="math inline">\(beta = 0.073 \pm 0.003\)</span> * <span class="math inline">\(\gamma = 0.32 \pm 0.07\)</span> * <span class="math inline">\(\alpha = 0.55 \pm 0.03\)</span> * <span class="math inline">\(\alpha + 2\beta + \gamma = 1.016\)</span> * cumulant derived value of 2.15 * <span class="math inline">\(beta = 0.040 \pm 0.002\)</span> * <span class="math inline">\(\gamma = 0.2 \pm 0.1\)</span> * <span class="math inline">\(\alpha = 0.34 \pm 0.05\)</span> * <span class="math inline">\(\alpha + 2\beta + \gamma = 0.62\)</span> * apparent critical temperature of 2.43 for a dataset (maximum susceptibility value) * <span class="math inline">\(beta = 0.26 \pm 0.03\)</span> * <span class="math inline">\(\gamma = 0.46 \pm 0.05\)</span> * <span class="math inline">\(\alpha = 0.0 \pm 0.7\)</span> * <span class="math inline">\(\alpha + 2\beta + \gamma = 0.98\)</span> These values all disagree significantly with the standard values… What is striking is the heat capacity exponent <span class="math inline">\(\alpha\)</span> being so large in most cases (and the apparent temperature case is only 0 because it fails to appropriately fit the data).</p>
<p>task list for tmr: * standardise curtailement in exponent method (have it as optional DT parameter) * implement other critical exponent methods * this includes slightly reworking graphing method to accomodate this * evaluate critical exponents relative to each other (scaling laws) * ask Dr Turci if he knows why i may be getting these underestimates * reevaluate cumulant critical temp method * potentially write up power law critical temp method; compare critical temps</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>