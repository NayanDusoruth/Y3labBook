{"title":"05/02/2026:","markdown":{"headingText":"05/02/2026:","containsRefs":false,"markdown":"#Wk3 lab log\n\nQuick group meeting w/Turci; outlined report requirements, structure and expectations\n\nDiscussed w/Scarlett direction; she's more interested in cluster behaviour, i'm more interested in critical exponents.\nMost of the core code functionality is setup; so there may be a point at which we start to diverge in our research interests.\nTBD, more code experimentation and setup to do, but to be considered.\n\nquickly attempted to generate data over temperature; however 1/np.array doesn't create a list of reciprocals; so that was a mistake\n\nam generally fiddling with data ranges and plotting graphs to get an idea of what data ranges would be ideal for this project.\ngenerally speaking range $\\beta \\in [0, 3]$ seems appropriate.\n\n\n### general reading\nReading more through cite{complexityAndCriticality} whilst waiting for data to generate.\n\nNote to self, can incorporate boltzman distribution Eq. 0.4:\n\n$p = \\frac{e^{-H\\beta}}{Z}$ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\  Eq. 0.4\n\nInto observable average as:\n\n$<A> = \\frac{1}{Z}\\sum{e^{-H\\beta} \\cdot A_{i}}$  \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\  Eq. 3.1\n\nmy be useful to better compute observables in main config\nAlso, may be useful to normalise observables to number of spins (\\frac{A}{N})\n\n### general log continued\nHave implemented above; the absolute magnetisation over beta plots change from:\n\n![Fig 3.1 - $M(\\beta)$ before implementing Eq. 3.1 for ($d=2$, $L=20$)](figures/beforeWeightedAverage.png){fig-align=\"left\"}\n\nto\n\n![Fig 3.2 - $M(\\beta)$ after implementing Eq. 3.1 for ($d=2$, $L=20$)](figures/afterWeightedAverage.png){fig-align=\"left\"}\n\nThis change seems to better incorporate the probability of configs, thus \"converging\" the average magnetisation to the \"true\" magnetisation significantly faster and better.\nThis has made the phase transition a lot clearer; in ($d=2$, $L=20$) appears to be ~ $\\beta_{c}=0.4$ - note however that equilibration times are a lot longer near criticality, so is noisier\n\n\n\n\n\n### To do list:\n* implemenet variable equilibration steps into dataset (so can pass in either float, or array of equilibration values) (done)\n* normalise observables \n* Figure out way to compute critical $\\beta_{c}$ from data\n* do a basic fit to $|T - T_{c}|^{x}$ where $x$ is the critical exponent \n\t* examine basic $x$ over a range of sizes to establish finite size effects\n\t* try and figure out way to account for finite size effects \n\n* repeat analysis in higher dimensions\n\n\n### lab log continuation\nhave tested a narrower temperature range ($T \\in [0.5, 5]$), yields:\n\n![Fig 3.3 - absolute magnetisation over temperature for ($d=2$, $L=20$)](figures/narrowTemp.png){fig-align=\"left\"}\n\nNote how high temperatures seemingly have a lot more uncertainty.\n\nAlso generated plots for the other observables:\n\n![Fig 3.4 - energies ($d=2$, $L=20$)](figures/energies.png){fig-align=\"left\"}\n\n![Fig 3.5 - partition function ($d=2$, $L=20$)](figures/partition.png){fig-align=\"left\"}\n\n![Fig 3.6 - entropies ($d=2$, $L=20$)](figures/entropies.png){fig-align=\"left\"}\n\nNote how Fig 3.4 seems to have some asymmetry in it's transition. It appears to have a near discontinuous increase about $T\\approx2$, but has a smoother continuous change as T increases.\nA few potential explanations worth considering:\n\n* From cite{complexityAndCriticality}, it seems that the $|T - T_{c}|^{x}$ expressions are usually one sided; this may be a manifestation of that?\n* May be finite size effect\n\n\nhemlholtz plot finally produced (code errors required re-simulating data for useful results):\n\n![Fig 3.7 - Helmholtz free energies ($d=2$, $L=20$)](figures/helmholtz.png){fig-align=\"left\"}\n\nIt seems that the critical temperature coincides w/minima of helmholtz free energy (ignoring outlying data points). Unsure if this is coincidental or not, however if so, may provide an incredibly easy method of finding the critical temperature.\n\n\n#### dataset data analysis:\nStarting to think about how to analyse the data being generated.\nParticularly, need to do following:\n\n* find the critical temperature\n* fit exponent curves of form $|T - T_{c}|^{x}$ to observables as appropriate (they may be one sided)\n\nTo do so however it is necessary to filter for evident outliers in the data. This may be done manually, however it'd be more convenient to do so automatically.\nA potential means to do this would be to filter by a generic \"continuity check\". Given a particular observable $a_{i}$ with neighbours $a_{i-1}$, $a_{i+1}$; it would interpolate between the neighbours; if $a_{i}$ is within uncertainty of the interpolated value, it is accepted, else it is rejected. This approach may cause erroneous results however when evaluating the edges of the dataset. Since this method relies on neighbours, it can't validate data at either end of the dataset. It may be possible to extrapolate to the data edges from the next 2 nearest points?\n\nThat may be a better way of doing it; extrapolate from the 2 nearest points for the continuity check. For most datapoints that will be both neighbours, however for the endpoints it will extrapolate from the data.\n\nThis method may be a bit crude, but should discard most outliers. \nTHe main risk is that it may \"flatten\" and trends in the data due to datapoints being too far apart from each other. However adequate sampling density should avoid this issue.\n\nQuickly implementing this method on the helmholtz energies yields:\n![Fig 3.8 - Filtered Helmholtz free energies ($d=2$, $L=20$)](figures/helmholtzFiltered.png){fig-align=\"left\"}\n\n\nWhich seems to not work. minor fixes; code is UGLY, but it seems to work.\nFiltering seems to work.\n\nTalked to Dr Turci, asked about the apparent minima in helmholtz free energy; pointed out its a non standard way of finding critical temps; suscpetibility/spin and specific capacity/spin are more common:\n\n$\\chi = \\beta\\frac{<M>^2 - <M^{2}>}{N}$\\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\  Eq. 3.2\n\n$C = \\beta^{2} \\cdot k_{b} \\cdot \\frac{<E>^2 - <E^{2}>}{N}$\\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\  Eq. 3.3\n\n\nattempted implementation; doesn't seem to be working yet.\nneeding to resimulate the data.\nAm also unsure how to propagate errors through the susceptibility and heat capacity either.\npropagating errors in terms yields:\n\n$\\Delta \\chi^{2} = (\\frac{\\beta}{N})^{2}((2<M>)^{2}\\Delta<M>^2 + \\Delta<M^{2}>^2)$\\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\  Eq. 3.4\n\n$\\Delta C^{2} = (\\frac{\\beta^{2}}{N})^{2}((2<E>)^{2}\\Delta<E>^2 + \\Delta<E^{2}>^2)$\\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\  Eq. 3.5\n\n\nsusceptibility seems to be working-ish (errors are massive but given expression i'm not sure error propagation makes sense as a concept) - also peak of susceptibility seems to be offset relative to apparent critical temperature in all other graphs ($T_Cs \\approx 3$).\n\nError found.\nEqs 3.2-3.5 use the mean, code was using weighted average instead.\nQuick graphs produced:\n\n![Fig 3.8 - Susceptibility ($d=2$, $L=20$)](figures/susceptibility.png){fig-align=\"left\"}\n\n![Fig 3.9 - Heat capacity ($d=2$, $L=20$)](figures/heatCapacity.png){fig-align=\"left\"}\n\nDon't think these work fully. actually unsure if i should used weighted average; textbook seems to indicate weighted average?\nAll of these tests have been conducted on a single dataset (saved for convenience) - it may be worth testing on a larger, more fine grain dataset.\n\n#### To Do list:\n* fix susceptibility and heat capacity computations\n* run big dataset; see if that fixes\n* figure out exponent fitting\n* add a \"recompute observables\" method to config object; that way old config objects can be updated if computations change\n* double check all observable computations\n\n\n\n## 06/02/2026:\nNot doing proper lab work today, but am generating some larger datasets in the background (40 configs over $T\\in [0.5, 5]$ for 100x100, 1000 Equil steps, 500 sim steps) to have better testing/development data.\nFurthermore, Dr Turci did some more thinking on the apparent minimal helmholtz free energy cooresponding to critical temperature.\nApparently the critical temperture should show up in the second derivative $\\frac{d^{2}F}{dT^{2}}$, but shouldn't be visible as is (given $dF = pdV -SdT$, and entropy SHOULD be positive (may need to double check thats computed correctly), F should decrease over data range); Dr Turci suggests it may be poor sampling about $T_{c}$; i suspect i've computed an observable incorrectly.\n\n\n## 07/02/2026:\n\n### log:\nobservables implemented:\n\n* Energy (code verified)\n* Magnetisation (code verified)\n* Partition function (code verified)\n* Entropy (code verified)\n* Helmholtz free energy (code verified)\n* Boltzman weights (Given average observables are weighted by boltzman distribution, computing these weights seperatedly made sense) (code verified)\n* Susceptibility (code verified)\n* Heat capacity (code verified)\n\nquickly rewrote calcEnergy - needed to be generalised; plus was opportunity to double check correct implementation\nSimilarly rewrote partition function method as it used a very similar implementation to calcEnergy\n\nHave double checked all the computation; nothing is immediately wrong\nreran data; seems susceptibility fixed itself, however heat capacity hasn't\n\nI suspect it may be due to noise in the data? would need to run a larger dataset to verify.\n\nImplementing \"continuous saving\" to \"fromBetas\" dataset construction - ensures that data saves over dataset generation ensuring interrupted runs don't wipe out whole chunk of data (also implemented \"already exists\" checks as part of this, allows for quick restarts) - code is messy but works and shouldn't need to be touched significantly\n\ncleaned up code a bit\n\nhave started working in critical exponent fitting.\n\ncomparing values to https://www.phys.ens.psl.eu/~jacobsen/AIMES/Ising.pdf which quotes $\\beta=\\frac{1}{8}$; testing finds $\\beta=0.03$ for 20x20 config; off by a factor of 4. Not the worst result however, but the fit leaves much to be desired:\n\n![Fig 3.10 - Fit attempt to $M\\propto |T-T_{c}|^{\\beta}$ $\\beta = -0.03\\pm0.05$ ($d=2$, $L=20$)](figures/fitAttempt.png){fig-align=\"left\"}\n\nWill need to do some debugging to see where this may be coming from...\n\nhave created new .py file; simply a place to streamline \"bulk data generation\" - imports everything else, that way desired datasets can be neatly laid out as a queue\nFurthermore, have updated how datasets save configs to files; they will also check if duplicate configs already exist and skip them if they do.\nThis makes restarting interrupted datasets easier, and means that its easier to add data to an existing dataset (I.E, it may be useful to add a high density region around critical points with higher equilibration steps).\n\nAm setting my laptop to generate some main data runs overnight; these are all 2D models in 3 batches which represent 1000, 2000, 3000 equilibration steps.\nThe first 2 batckes (1000, 2000 steps) have a range of sizes [20, 30, 40] whilst the final batch has a range [20, 30, 40, 50, 60, 70, 80, 90].\nThis was done to compare the effects of equilibration times, as well as to begin investigating finite size effects empirically.\nThe longest equilibration dataset has more sizes because it is expected to be the highest quality data, and establishing the effect of equilibration can be done with a more limited subset of data.\n\n\n## 09/02/2026\nLaptop is still generating data.\nFirst night, it shut itself down interrupting progress.\nSecond night it was kept on, and mostly handled the 100x100 over 3000eq steps, 500sim steps. Starting at ~ 14:00 08/02/2026, till now (10:00 09/02/2026) it has generated 18/40 datapoints.\nGiven that each simulation calls \"mcMove\" for each step taken, and that \"mcMove\" loops through and performs a computation for each of its cells; the above timings gives a rough computation speed of  $8750 cell computations/s$ (alternatively $31.5 \\cdot 10^{6} cell computations/Hr$ or $0.756 \\cdot 10^{9} cell computations/day$).\nTHis is useful as it allows for time estimates for future datasets to be planned in advance, allowing for better planning.\nThe theoretical timings for potential datasets of 3000eq, 500sim steps, 40 datapoints follow:\n\n* 3D $20^{3}$: ~1.48 days\n* 3D $22^{3}$: ~1.97 days\n* 4D $10^{4}$: ~ 1.85 days\n* 5D $6^{5}$: ~1.44 days\n* 6D $4^{6}$: ~0.76 days\n\n* 4D $20^{4}$: ~ 29.6 days\n\nThe large 4D example is impractical to generate given the time constraints of this project. \nHowever all the other options aren't impractical. Combined they'd take ~1Wk non stop computation to complete. Whilst there are likely to be some interruptions, i think this may be feasible.\nThe main question is to what degree can finite size effects be accounted for in such small model sizes; if its possible to account and \"correct\" for such finite size effects, comparing critical exponents over $d\\in[2,6]$ may be interesting. However given the significant computational investement, its worth **knowing** the following:\n\n* How to correct/account for finite size effects - this is crucial, otherwise the different sized different dimensioned datasets can't be compared to each other\n* What should the dataset parameters be for arbitrary dimension/size:\n\t* How does model size and dimension relate to required equilibration steps\n\t* How does critical temperature relate to dimensionality\n\t* this is important because of the heavy computational investment; exploring a particular dimension to determine these parameters experimentally would be a waste of time; so trying to estimate the appropriate equilibration steps and temperature ranges.\n\nAs such, its worth doing some additional reading/research particularly to address correcting for finite size effects.\n\n\n### minor reading\ncite{complexityAndCriticality} has a section on scaling laws (p188 onwards); the key insight worth taking away is normalising the temperature.\nThe critical exponents for a given observable typically look like:\n\n$O \\propto |T-T_{c}|^{\\beta}$ \n\nthe insight is to normalise $T$ as:\n\n$t=\\frac{T-T{c}}{T_{c}}$ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\  Eq. 3.6\n\ns.t that the exponent expression become:\n\n$O \\propto |t|^{\\beta}$  \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\  Eq. 3.7\n\n\n$O = h(x) |t|^{\\beta}$  \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\  Eq. 3.8\n\nwhere $h(x)$ represents some scaling function. The book goes into further detail as to what these scaling functions should look like, however given the data being generated, it should be possible to fit for $h(x)$ and $\\beta$ empirically. It may be interesting to compare the empirically fit $h(x)$ to analytical solutions of time allows, but it seems that its possible to entirely bypass that analytical component (which makes this project more straightofrward for the moment).\n\nNote the book goes into some detail about the scaling function. Examining the scaling function for magnetisation specifically, it generally has the shape:\n\n\n![Fig 3.11 - Scaling function for magnetisation rough sketch - note $M(\\frac{h}{|t|^{\\Delta}})$ as a function of external magnetic field](figures/scalingSketch.png){fig-align=\"left\"}\n\nAnd relationships:\n\n$lim_{x\\to 0}M_{+}(x)=0$  \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\  Eq. 3.9\n\n$lim_{x\\to 0}M_{-}(x)=c \\ne 0$  \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\ \\  Eq. 3.10\n\nSo when fitting the data, it will be necessary to consider which side of the critical point is being evaluated\n\n\n\n\n\n\n\n\n\n","srcMarkdownNoYaml":""},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../styles.css"],"toc":true,"output-file":"3_1_labLog.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.8.27","theme":["cosmo","brand"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}